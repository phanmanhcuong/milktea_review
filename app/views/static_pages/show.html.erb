<div class="slider-home" data-slide1="https://static1.squarespace.com/static/50ce46ece4b01020c34fd52b/t/574b522001dbae6639167a07/1464554038338/"
  data-slide2="https://media.foody.vn/res/g70/690046/prof/s576x330/foody-mobile-21151718_25803249804-849-636416680003261766.jpg"
  data-slide3="https://static1.squarespace.com/static/50ce46ece4b01020c34fd52b/t/563d6aa2e4b0ff1b9668fd4c/1446865591436/"
  data-slide4="http://img.cdn2.vietnamnet.vn/Images/english/2017/09/17/16/20170917163128-1.jpg"
  data-slide5="http://danielfooddiary.com/wp-content/uploads/2015/09/soi553.jpg"
  data-current="1">
</div>

<div class="search-bar" style="padding: 15px;">
  <div class="search-form" style="min-width: 500px;">
    <%= search_form_for @q, url: root_path, remote: true do |f| %>
      <%= sort_link @q, :title, {}, {remote: true, method: :get} do %>
        <strong class="col-sm-1" style="margin: 15px 0;">Name</strong>
      <% end %>

      <%= sort_link@q, :price_from, {}, {remote: true, method: :get} do %>
        <strong class="col-sm-1" style="margin: 15px 0;">Start Price</strong>
      <% end %>

      <%= sort_link @q, :price_upto, {}, {remote: true, method: :get,
        default_order: :desc} do %>
        <strong class="col-sm-1" style="margin: 15px 0;">Total Price</strong>
      <% end %>

      <%= sort_link @q, :average_point, {}, {remote: true, method: :get} do %>
        <strong class="col-sm-1" style="margin: 15px 0;">Rating</strong>
      <% end %>

      <div class="input-group input-group-lg col-sm-6">
        <div class="form-group has-feedback has-clear input-group-lg">
          <%= f.text_field :title_cont, class: "form-control",
            placeholder: "Search", id: "searchinput" %>
          <span id="searchclear" class="form-control-clear glyphicon
            glyphicon-remove-circle form-control-feedback"></span>
        </div>
        <span class="input-group-btn">
          <%= f.submit "Search", class: "btn btn-primary" %>
        </span>
      </div>
    <% end %>
  </div>
</div>

<div class="container-fluid">
  <div class="main-content">
    <div class="row">
      <div class="col-sm-3 main-side-menu">
        <% Aji.all.each_with_index do |f, index| %>
          <div class="aji" style="padding: 15px 10px;color: white;
            height: 60px; background: rgba(<%= index%4*50 %>, <%= index%5*30 %>,88,0.51);
            font-size: 1.2em" data-id="<%= index + 1 %>"><%= f.label %></div>
        <% end %>
      </div>

      <div class="col-sm-9 main-side-content" style="">
        <div id="pagination" class="apple-pagination text-center" style="font-size: 2em;">
          <%= paginate @reviews, remote: true %>
        </div>
        <div id="review-zone">
          <%= render "review" %>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .slider-home {
    height: 93vh;
    transition: 1s;
    animation: fadeBlur 7.2s infinite;
    background-size: cover !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
  }

  .current{
    font-weight: bold;
  }
</style>
<script type="text/javascript" charset="utf-8">
  var slide1 = 'url('+$('.slider-home').attr('data-slide1')+')';
  var slide2 = 'url('+$('.slider-home').attr('data-slide2')+')';
  var slide3 = 'url('+$('.slider-home').attr('data-slide3')+')';
  var slide4 = 'url('+$('.slider-home').attr('data-slide4')+')';
  var slide5 = 'url('+$('.slider-home').attr('data-slide5')+')';

  function loopSlider(counter) {
    var slide;
    switch(counter%5) {
      case 0:
        slide = slide1;
        break;
      case 1:
        slide = slide2;
        break;
      case 2:
        slide = slide3;
        break;
      case 3:
        slide = slide4;
        break;
      case 4:
        slide = slide5;
        break;
      default:
        slide = slide1;
        break;
    }
    counter++;
    $('.slider-home').fadeOut(1200).css('background', slide).fadeIn(1500);
    setTimeout(function(){loopSlider(counter)}, 7000);
  }

  loopSlider(0)

  $(document).ready(function() {
    $('.aji').on('click',function () {
      $.ajax({
        url: '/',
        data: {
          q: {
            aji_id_eq: $(this).attr('data-id')
          },
          menu: true
        }
      });
    })
  });
</script>
